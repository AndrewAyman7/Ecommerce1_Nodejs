<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css"> <!-- starts from assets folder -->
</head>
<body>
    

    <%- include("parts/navbar.ejs") %>    <!-- Because i will use navbar in many pages  -->


    <div class="container">


        <form action="" method="get">

            <select name="category" class="form-control">
                <option value="all">All</option>
                <option value="phones">Phones</option>
                <option value="clothes">Clothes</option>
                <option value="watches">Watches</option>
            </select>

            <input type="submit" value="filter" class="btn btn-danger">
             
        </form> 

        

        <% if(invalid) { %>
        <p class="alert alert-danger">
            <%= invalid.msg %>
        </p>
        <% } %> 



        <div class="row">

            
            <% for (let product of products){ %>
            <div class="col col-12 col-md-6 col-lg-4 col-xl-3">

                <div class="card" style="width: 18rem;">
                    <img src="<%= product.image %>" class="card-img-top" alt="...">
                    <div class="card-body">
                    <h5 class="card-title">
                        <a href="/product/<%=product.id%>">  <%= product.name %>  </a>
                        <p class="card-text">  Price : <%= product.price  %>$  </p>
                    </h5>   

                    <form action="/cart" method="post">
                        <input type="number" name="amount" class="form-control">
                        <input type="hidden" name="name"       value="<%= product.name %>">
                        <input type="hidden" name="price"      value="<%= product.price %>">
                        <input type="hidden" name="productId"  value="<%= product.id %>"> 
                        <input type="hidden" name="redirectTo" value="/">  

                        <input type="submit" value="Add To Cart" class="btn btn-primary"> 
                    </form>  

                    </div> 
                </div>

            </div>
            <% } %>

            
        </div>
    </div>



    <script src="/js/bootstrap.min.css"></script>
    <script src="/js/bootstrap1.min.css"></script>
    <script src="/js/popper.min.css"></script>
</body>
</html>